{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst form = document.querySelector('.feedback-form');\nconst LS_KEY = 'feedback-form-state';\n\nconst { email, message } = form.elements;\nconst savedData = JSON.parse(localStorage.getItem(LS_KEY));\n\nlet formData = {\n  email: savedData ? savedData.email : '',\n  message: savedData ? savedData.message : '',\n};\n\nemail.value = formData.email;\nmessage.value = formData.message;\n\nform.addEventListener('input', throttle(onFormInput, 500));\nform.addEventListener('submit', onFormSubmit);\n\nfunction onFormInput(e) {\n  e.preventDefault();\n  const { name, value } = e.target;\n\n  if (name === 'email') {\n    formData.email = value;\n  }\n  if (name === 'message') {\n    formData.message = value.trim();\n  }\n\n  localStorage.setItem(LS_KEY, JSON.stringify(formData));\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  if (!email.value || !message.value) {\n     return alert(`Please fill in the ${email.value ? \"Message\" : \"Email\"} field`);\n  }\n  localStorage.removeItem(LS_KEY);\n  form.reset();\n  console.log(formData);\n  formData = {};\n}\n"],"names":["form","LS_KEY","email","message","savedData","formData","throttle","onFormInput","onFormSubmit","e","name","value"],"mappings":"wIAEA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAS,sBAET,CAAE,MAAAC,EAAO,QAAAC,GAAYH,EAAK,SAC1BI,EAAY,KAAK,MAAM,aAAa,QAAQH,CAAM,CAAC,EAEzD,IAAII,EAAW,CACb,MAAOD,EAAYA,EAAU,MAAQ,GACrC,QAASA,EAAYA,EAAU,QAAU,EAC3C,EAEAF,EAAM,MAAQG,EAAS,MACvBF,EAAQ,MAAQE,EAAS,QAEzBL,EAAK,iBAAiB,QAASM,EAASC,EAAa,GAAG,CAAC,EACzDP,EAAK,iBAAiB,SAAUQ,CAAY,EAE5C,SAASD,EAAYE,EAAG,CACtBA,EAAE,eAAc,EAChB,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAE,OAEtBC,IAAS,UACXL,EAAS,MAAQM,GAEfD,IAAS,YACXL,EAAS,QAAUM,EAAM,QAG3B,aAAa,QAAQV,EAAQ,KAAK,UAAUI,CAAQ,CAAC,CACvD,CAEA,SAASG,EAAaC,EAAG,CAEvB,GADAA,EAAE,eAAc,EACZ,CAACP,EAAM,OAAS,CAACC,EAAQ,MAC1B,OAAO,MAAM,sBAAsBD,EAAM,MAAQ,UAAY,eAAe,EAE/E,aAAa,WAAWD,CAAM,EAC9BD,EAAK,MAAK,EACV,QAAQ,IAAIK,CAAQ,EACpBA,EAAW,CAAA,CACb"}